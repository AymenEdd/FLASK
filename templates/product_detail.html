{% extends "base.html" %} 
{% block title %}{{ product.name }} - Boutique en Ligne{% endblock %} 

{% block content %}
<div style="padding-top: 80px;"></div>
<div style="padding-top: 80px;"></div>

<div class="container py-4">
  <div class="row">
    <div class="col-md-6">
      <img
        src="{{ product.image_url }}"
        class="img-fluid rounded shadow"
        alt="{{ product.name }}"
      />
    </div>

    <div class="col-md-6">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="{{ url_for('home') }}">Accueil</a>
          </li>
          <li class="breadcrumb-item">
            <a href="{{ url_for('products') }}">Produits</a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">
            {{ product.name }}
          </li>
        </ol>
      </nav>

      <h1 class="display-5 fw-bold">{{ product.name }}</h1>
      <p class="lead text-muted">{{ product.category }}</p>

      <div class="mb-4">
        <span class="display-6 text-primary fw-bold">
          {{ "%.2f"|format(product.price) }} DH
        </span>
      </div>

      <div class="mb-4">
        <h5>Description</h5>
        <p class="text-muted">{{ product.description }}</p>
      </div>

      <div class="mb-4">
        <h5>Disponibilité</h5>
        {% if product.stock > 0 %}
        <span class="badge bg-success fs-6">
          <i class="fas fa-check"></i> En stock ({{ product.stock }} disponibles)
        </span>
        {% else %}
        <span class="badge bg-danger fs-6">
          <i class="fas fa-times"></i> Rupture de stock
        </span>
        {% endif %}
      </div>

      <div class="d-grid gap-2 d-md-flex">
        {% if current_user.is_authenticated %} 
          {% if product.stock > 0 %}
          <a
            href="{{ url_for('add_to_cart', product_id=product.id) }}"
            class="btn btn-primary btn-lg me-md-2"
          >
            <i class="fas fa-cart-plus"></i> Ajouter au panier
          </a>
          <a href="{{ url_for('checkout') }}" class="btn btn-success btn-lg">
            <i class="fas fa-bolt"></i> Acheter maintenant
          </a>
          {% else %}
          <button class="btn btn-secondary btn-lg" disabled>
            <i class="fas fa-times"></i> Indisponible
          </button>
          {% endif %} 
        {% else %}
        <a href="{{ url_for('login') }}" class="btn btn-primary btn-lg">
          <i class="fas fa-sign-in-alt"></i> Connectez-vous pour acheter
        </a>
        {% endif %}
      </div>

      <div class="mt-4">
        <h5>Caractéristiques du produit</h5>
        <ul class="list-unstyled">
          <li>
            <i class="fas fa-check text-success me-2"></i> Matériaux de haute qualité
          </li>
          <li>
            <i class="fas fa-check text-success me-2"></i> Livraison rapide disponible
          </li>
          <li>
            <i class="fas fa-check text-success me-2"></i> Politique de retour sous 30 jours
          </li>
          <li>
            <i class="fas fa-check text-success me-2"></i> Service client à votre écoute
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Section Produits Similaires -->
  <div class="row mt-5">
    <div class="col-12">
      <h3 class="mb-4">Vous pourriez aussi aimer</h3>
    </div>
    <!-- Ici s’afficheraient normalement les produits liés à la même catégorie -->
    <div class="col-12">
      <div class="alert alert-info">
        <i class="fas fa-info-circle"></i>
        Les produits similaires s’afficheront ici en fonction de la catégorie.
      </div>
    </div>
  </div>
</div>
{% endblock %}
